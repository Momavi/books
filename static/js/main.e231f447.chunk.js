(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{13:function(e,t,o){e.exports={counter:"paginator_counter__CSilD",counter__item:"paginator_counter__item__3evtN",active:"paginator_active__yLCrV",btn:"paginator_btn__3tqdJ"}},20:function(e,t,o){e.exports={search:"Search_search__aElN-",search__wrapper:"Search_search__wrapper__1d7TJ",search__title:"Search_search__title__1T9Lv"}},21:function(e,t,o){e.exports={books__wrapper:"Books_books__wrapper__azvND",books__paginator:"Books_books__paginator__1xJY_",error:"Books_error__1sSrA"}},5:function(e,t,o){e.exports={form:"SearchForm_form__3SJu_",form__input:"SearchForm_form__input__1tyH0",form__wrapper:"SearchForm_form__wrapper__OP6Yl",form__categori:"SearchForm_form__categori__h8GWD",form__categori__text:"SearchForm_form__categori__text__2fYxy",form__sort:"SearchForm_form__sort__rmkuj",form__sort__text:"SearchForm_form__sort__text__1NU9P",form__button:"SearchForm_form__button__1id9v"}},7:function(e,t,o){e.exports={book:"Book_book__hsvXs",book__wrapper:"Book_book__wrapper__2Lo9v",book__inner:"Book_book__inner__2S1C-",book__title:"Book_book__title__2f88A",book__image:"Book_book__image__2U7i2",book__image__img:"Book_book__image__img__16SAZ",book__info:"Book_book__info__Q9wSA",book__authors:"Book_book__authors__2cmoq",book__categories:"Book_book__categories__SLMAA",book__btn:"Book_book__btn__1ZZy-"}},72:function(e,t,o){},73:function(e,t,o){},74:function(e,t,o){},75:function(e,t,o){"use strict";o.r(t);var a=o(15),n=o.n(a),r=o(0),c=o.n(r),s=o.p+"static/media/preloader.a9c647ed.svg",i=o(1);var _=function(e){return Object(i.jsx)("img",{src:s,alt:"preloader"})},p=o(14);var u=function(e){return Object(i.jsx)("option",{value:e.name,children:e.name})},l=o(5),b=o.n(l);var j=function(e){var t=e.booksPage,o=t.categori.map((function(e){return Object(i.jsx)(u,{name:e.name},e.id)})),a=t.sort.map((function(e){return Object(i.jsx)(u,{name:e.name},e.id)}));return Object(i.jsx)(p.c,{initialValues:{text:"",categori:"all",sort:"relevance"},onSubmit:function(t){e.setFormData(t),e.getBooks(t,1,e.booksPage.pageSize)},children:Object(i.jsxs)(p.b,{className:b.a.form,children:[Object(i.jsx)(p.a,{className:b.a.form__input,name:"text"}),Object(i.jsxs)("div",{className:b.a.form__wrapper,children:[Object(i.jsxs)("div",{className:b.a.form__categori,children:[Object(i.jsx)("label",{className:b.a.form__categori__text,children:"Categories"}),Object(i.jsx)(p.a,{className:b.a.form__categori__field,name:"categori",as:"select",children:o})]}),Object(i.jsxs)("div",{className:b.a.form__sort,children:[Object(i.jsx)("label",{className:b.a.form__sort__text,children:"Sorting by"}),Object(i.jsx)(p.a,{className:b.a.form__sort__field,name:"sort",as:"select",children:a})]})]}),Object(i.jsx)("button",{className:b.a.form__button,type:"submit",children:"Submit"})]})})},m=o(20),g=o.n(m);var h=function(e){return Object(i.jsx)("div",{className:g.a.search,children:Object(i.jsxs)("div",{className:g.a.search__wrapper,children:[Object(i.jsx)("h1",{className:g.a.search__title,children:"Search for books"}),Object(i.jsx)(j,{booksPage:e.booksPage,setFormData:e.setFormData,getBooks:e.getBooks})]})})},O=o(10),d=o(6),f=o(12),k=o.n(f),x=o(18),v=o(3),P=o(35).create({baseURL:"https://www.googleapis.com/books/v1/"}),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,a="AIzaSyCtNydhUF3PxH_n7KSa5WimBl_qLIwQyHg",n="all"===e.categori?"":"+subject:".concat(e.categori);return P.get("volumes?q=".concat(e.text).concat(n,"&orderBy=").concat(e.sort,"&startIndex=").concat(t,"&maxResults=").concat(o,"&key=").concat(a))},S="SET_BOOKS",B="SET_CURRENT_PAGE",y="TOGGLE_IS_FETCHING",C="SET_TOTAL_BOOKS_COUNT",w="SET_FORM_DATA",F="GET_FORM_DATA",D={books:[],pageSize:30,totalBooks:0,currentPage:1,isFetching:!1,categori:[{id:1,name:"All"},{id:2,name:"Art"},{id:3,name:"Biography"},{id:4,name:"Computers"},{id:5,name:"History"},{id:6,name:"Medical"},{id:7,name:"Poetry"}],sort:[{id:1,name:"Relevance"},{id:2,name:"Newest"}],formData:{text:"",categori:"all",sort:"relevance"}};var T=function(e){return{type:S,books:e}},A=function(e){return{type:C,totalBooks:e}},E=function(e){return{type:y,isFetching:e}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;return function(){var a=Object(x.a)(k.a.mark((function a(n){var r,c;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(E(!0)),r=t*o-o,a.next=4,N(e,r,o);case 4:c=a.sent,n(A(c.data.totalItems)),n(T(c.data.items)),n(E(!1));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(v.a)(Object(v.a)({},e),{},{books:t.books});case B:return Object(v.a)(Object(v.a)({},e),{},{currentPage:t.currentPage});case y:return Object(v.a)(Object(v.a)({},e),{},{isFetching:t.isFetching});case C:return Object(v.a)(Object(v.a)({},e),{},{totalBooks:t.totalBooks});case w:case F:return Object(v.a)(Object(v.a)({},e),{},{formData:t.formData});default:return e}},I=Object(d.c)(Object(O.b)((function(e){return{booksPage:e.booksPage}}),{setFormData:function(e){return{type:w,formData:e}},getBooks:L}))(h),R=o(36),U=o(37),G=o(42),M=o(40),J=o(7),H=o.n(J);var q=function(e){var t=e.volume;return Object(i.jsx)("span",{children:void 0!==t?t.map((function(e,o){return t.length-1>o?Object(i.jsxs)("span",{children:[e,", "]},o):Object(i.jsx)("span",{children:e},o)})):null})},K=function(e){var t=e.book,o=e.togglePopupOpen,a=e.isPopupOpen,n=t.volumeInfo;return Object(i.jsx)("div",{className:H.a.book__wrapper,children:Object(i.jsxs)("div",{className:H.a.book__inner,children:[Object(i.jsx)("img",{className:H.a.book__image__img,src:void 0!==n.imageLinks?n.imageLinks.thumbnail:null,alt:""}),Object(i.jsxs)("div",{className:H.a.book__info,children:[Object(i.jsx)("h3",{className:H.a.book__title,children:n.title}),Object(i.jsxs)("div",{className:H.a.book__description,children:[Object(i.jsxs)("div",{className:H.a.book__authors,children:[Object(i.jsx)("span",{children:"\u0410\u0432\u0442\u043e\u0440\u044b: "}),Object(i.jsx)(q,{volume:n.authors})]}),Object(i.jsxs)("div",{className:H.a.book__categories,children:[Object(i.jsx)("span",{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: "}),Object(i.jsx)(q,{volume:n.categories})]})]})]}),Object(i.jsx)("button",{onClick:function(){o(t,!a)},className:H.a.book__btn,children:"Show more"})]})},t.etag)},V=o(19),Y=o(41),Z=o(13),Q=o.n(Z),W=o(38),X=o.n(W),$=function(e){for(var t=e.totalBooksCount,o=e.pageSize,a=e.currentPage,n=e.onPageChanged,c=e.portionSize,s=void 0===c?10:c,_=Math.ceil(t/o),p=[],u=1;u<=_-1;u++)p.push(u);var l=Math.ceil(_/s),b=Object(r.useState)(1),j=Object(Y.a)(b,2),m=j[0],g=j[1],h=(m-1)*s+1,O=m*s;return Object(i.jsxs)("ul",{className:Q.a.counter,children:[m>1&&Object(i.jsx)("button",{className:Q.a.btn,onClick:function(){g(m-1)},children:"PREV"}),p.filter((function(e){return e>=h&&e<=O})).map((function(e){return Object(i.jsx)("span",{className:X()(Object(V.a)({},Q.a.active,a===e),Q.a.counter__item),onClick:function(t){n(e)},children:e},e)})),l>m&&Object(i.jsx)("button",{className:Q.a.btn,onClick:function(){g(m+1)},children:"NEXT"})]})},ee=o(21),te=o.n(ee);var oe=function(e){var t=e.books,o=e.onPageChanged,a=e.pageSize,n=e.totalBooksCount,r=e.currentPage,c=e.isFetching,s=e.isPopupOpen,p=e.togglePopupOpen;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("h2",{children:["Total books we found: ",n]}),Object(i.jsx)("div",{className:te.a.books__paginator,children:Object(i.jsx)($,{currentPage:r,onPageChanged:o,totalBooksCount:n,pageSize:a})}),Object(i.jsx)("div",{className:te.a.books__wrapper,children:c?Object(i.jsx)(_,{}):void 0!==t?t.map((function(e){return Object(i.jsx)(K,{book:e,isPopupOpen:s,togglePopupOpen:p},e.etag)})):Object(i.jsx)("span",{className:te.a.error,children:"\u041a\u043d\u0438\u0433\u0438 \u043f\u0440\u043e\u043f\u0430\u043b\u0438(\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430)"})})]})},ae="SET_POPUP_DATA",ne="TOOGLE_POPUP_OPEN",re={popupData:{},isPopupOpen:!1};var ce=function(e){return{type:ae,popupData:e}},se=function(e){return{type:ne,isPopupOpen:e}},ie=function(e,t){return function(){var o=Object(x.a)(k.a.mark((function o(a){return k.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a(ce(e)),a(se(t));case 2:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(v.a)(Object(v.a)({},e),{},{popupData:t.popupData});case ne:return Object(v.a)(Object(v.a)({},e),{},{isPopupOpen:t.isPopupOpen});default:return e}},pe=function(e){return e.booksPage.books},ue=function(e){return e.booksPage.pageSize},le=function(e){return e.booksPage.totalBooks},be=function(e){return e.booksPage.currentPage},je=function(e){return e.booksPage.isFetching},me=function(e){return e.booksPage.formData},ge=function(e){Object(G.a)(o,e);var t=Object(M.a)(o);function o(){var e;Object(R.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getBooks(e.props.formData,t,30)},e}return Object(U.a)(o,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(i.jsx)(i.Fragment,{children:this.props.isFetching?Object(i.jsx)(_,{}):Object(i.jsx)(oe,{books:this.props.books,pageSize:this.props.pageSize,onPageChanged:this.onPageChanged,totalBooksCount:this.props.totalBooksCount,currentPage:this.props.currentPage,isFetching:this.props.isFetching,isPopupOpen:this.props.isPopupOpen,togglePopupOpen:this.props.togglePopupOpen})})}}]),o}(c.a.Component),he=Object(d.c)(Object(O.b)((function(e){return{books:pe(e),pageSize:ue(e),totalBooksCount:le(e),currentPage:be(e),isFetching:je(e),formData:me(e),isPopupOpen:e.popupPage.isPopupOpen,togglePopupOpen:ie}}),{getBooks:L,setCurrentPage:function(e){return{type:B,currentPage:e}},setPopupData:ce,togglePopupOpen:ie}))(ge),Oe=(o(72),function(e){var t=e.popupPage,o=e.popupPage.popupData.volumeInfo;return Object(i.jsx)("div",{children:void 0!==o?Object(i.jsx)("div",{className:"popup ".concat(t.isPopupOpen?"open":"close"),onClick:function(){e.togglePopupOpen(!t.isPopupOpen)},children:Object(i.jsxs)("div",{className:"popup__body",children:[Object(i.jsx)("div",{className:"popup__close",onClick:function(){e.togglePopupOpen(!t.isPopupOpen)},children:"\xd7"}),Object(i.jsx)("h3",{children:o.title}),Object(i.jsx)("img",{src:void 0!==o.imageLinks?o.imageLinks.thumbnail:null,alt:""}),Object(i.jsxs)("div",{className:"popup__authors",children:[Object(i.jsx)("span",{children:"\u0410\u0432\u0442\u043e\u0440\u044b: "}),Object(i.jsx)(q,{volume:o.authors})]}),Object(i.jsxs)("div",{className:"popup__categories",children:[Object(i.jsx)("span",{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: "}),Object(i.jsx)(q,{volume:o.categories})]}),Object(i.jsx)("p",{className:"popup__description",children:o.description})]})}):null})}),de=Object(d.c)(Object(O.b)((function(e){return{popupPage:e.popupPage}}),{setPopupData:ce,togglePopupOpen:ie}))(Oe);o(73);var fe=function(e){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(de,{}),Object(i.jsx)(I,{}),Object(i.jsx)(r.Suspense,{fallback:Object(i.jsx)(_,{}),children:Object(i.jsxs)("div",{className:"content",children:[Object(i.jsx)("h2",{children:"...The books are almost here, it remains to press the button"}),Object(i.jsx)(he,{})]})})]})},ke=o(39),xe=Object(d.b)({booksPage:z,popupPage:_e}),ve=Object(d.d)(xe,Object(d.a)(ke.a));o(74);n.a.render(Object(i.jsx)(O.a,{store:ve,children:Object(i.jsx)(fe,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.e231f447.chunk.js.map